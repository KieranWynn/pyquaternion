<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Kieran Wynn">
        <link rel="canonical" href="http://kieranwynn.github.io/pyquaternion/operations/">
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>Quaternion Operations - pyquaternion</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">pyquaternion</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../quaternion_basics">Quaternion Basics</a>
                </li>
            
            
            
                <li >
                    <a href="../initialisation">Object Initialisation</a>
                </li>
            
            
            
                <li >
                    <a href="../features">Quaternion Features</a>
                </li>
            
            
            
                <li class="active">
                    <a href=".">Quaternion Operations</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../features">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li class="disabled">
                    <a rel="prev" >
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/KieranWynn/pyquaternion">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#quaternion-operations">Quaternion Operations</a></li>
        
            <li><a href="#string-representation">String Representation</a></li>
        
            <li><a href="#bool">Bool</a></li>
        
            <li><a href="#equality">Equality</a></li>
        
            <li><a href="#negation">Negation</a></li>
        
            <li><a href="#addition">Addition</a></li>
        
            <li><a href="#subtraction">Subtraction</a></li>
        
            <li><a href="#multiplication">Multiplication</a></li>
        
            <li><a href="#division">Division</a></li>
        
            <li><a href="#exponentiation">Exponentiation</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="quaternion-operations">Quaternion Operations</h1>
<p>This page defines operations applicable to pyquaternion's Quaternion objects.</p>
<p>The code examples below assume the existence of a Quaternion object. You can recreate this by running the following in your Python interpreter of choice:</p>
<pre><code>my_quaternion = Quaternion.random()
</code></pre>
<h2 id="string-representation">String Representation</h2>
<blockquote>
<p><strong><code>__str__()</code></strong></p>
</blockquote>
<p><code>str(my_quaternion)</code> returns an informal, nicely printable string representation of the Quaternion object. <a href="https://docs.python.org/3.4/reference/datamodel.html#object.__str__">Source</a></p>
<pre><code>&gt;&gt;&gt; str(my_quaternion)
    '-0.810 +0.022i -0.563j -0.166k'
&gt;&gt;&gt; print(my_quaternion)
    -0.810 +0.022i -0.563j -0.166k
&gt;&gt;&gt;
</code></pre>
<hr />
<blockquote>
<p><strong><code>__repr__()</code></strong></p>
</blockquote>
<p><code>repr(my_quaternion)</code> returns the 'official' string representation of the Quaternion object.  This is a string representation of a valid Python expression that could be used to recreate an object with the same value (given an appropriate environment). <a href="https://docs.python.org/3.4/reference/datamodel.html#object.__repr__">Source</a></p>
<pre><code>&gt;&gt;&gt; repr(my_quaternion)
    'Quaternion(-0.80951530224438595, 0.022231097065902788, -0.56268832802625091,-0.16604999023923223)'
&gt;&gt;&gt; my_quaternion
    Quaternion(-0.80951530224438595, 0.022231097065902788, -0.56268832802625091,-0.16604999023923223)
&gt;&gt;&gt;
</code></pre>
<hr />
<blockquote>
<p><strong><code>__format__(format_spec)</code></strong></p>
</blockquote>
<p><code>a_string_containing_{format_spec}_placeholders.format(my_quaternion)</code> inserts a customisable, nicely printable string representation of the Quaternion object into the respective places in the provided string. <a href="https://docs.python.org/3.4/reference/datamodel.html#object.__format__">Source</a></p>
<p>The syntax for <code>format_spec</code> mirrors that of the built in format specifiers for floating point types. Check out the official Python <a href="https://docs.python.org/3.4/library/string.html#formatspec">format specification mini-language</a> for details.
An empty <code>format_spec</code> string will result in the same behaviour as the <code>Quaternion.__str__()</code>.</p>
<pre><code>&gt;&gt;&gt; "My quaternion is: {}".format(my_quaternion)
    'My quaternion is: -0.810 +0.022i -0.563j -0.166k'
&gt;&gt;&gt; "My quaternion is: {:+.6}".format(my_quaternion)
    'My quaternion is: -0.809515 +0.0222311i -0.562688j -0.16605k'
</code></pre>
<h2 id="bool">Bool</h2>
<blockquote>
<p><strong><code>__bool__()</code> or <code>__nonzero__()</code></strong></p>
</blockquote>
<p><strong>Returns:</strong> <code>False</code> within a logical context if the Quaternion object is zero, i.e. <code>Quaternion(0.0, 0.0, 0.0, 0.0)</code> or <code>True</code> otherwise. </p>
<p>The bitwise not operator <code>~</code> can be used to invert the boolean value, however the keyword <code>not</code> (logical) is preferred.</p>
<p><strong>Note:</strong> This does not evaluate the booleanity of a quaternion rotation. A non-zero Quaternion object such as <code>Quaternion(1.0, 0.0, 0.0, 0.0)</code> will have a boolean value of <code>True</code> even though it represents a <strong>null</strong> rotation.</p>
<pre><code>&gt;&gt;&gt; Quaternion() == True
True
&gt;&gt;&gt; not Quaternion() == False
True
&gt;&gt;&gt; Quaternion(scalar=0.0) == False
True
</code></pre>
<h2 id="equality">Equality</h2>
<blockquote>
<p><strong><code>__eq__(other)</code></strong></p>
</blockquote>
<p><code>q1 == q2</code> returns <code>True</code> if all corresponding elements are equal between two Quaternion objects <code>q1</code> and <code>q2</code>, or <code>False</code> otherwise. </p>
<p>The inequality operator <code>!=</code> can also be used to verify inequality in a similar way.</p>
<p>Because comparisons are carried out on floating point elements, equality is considered <code>True</code> when the absolute difference between elements falls below a threshold error. This is determined by <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html">numpy.allclose()</a> with an absolute tolerance of <code>1.0e-14</code> and a relative tolerance of <code>1.0e-13</code>. As a result, objects differing by very small individual element differences may be considered equal.</p>
<p><strong>Note:</strong> This does not directly evaluate the equality of a quaternion rotation. For example, unit Quaternions q and -q will have an equality of <code>False</code> even though they represent the equivalent rotation.</p>
<pre><code>&gt;&gt;&gt; Quaternion(1, 0, 1, 1) == Quaternion(scalar=1.0, vector=[0.0, 1.0, 1.0])
True
&gt;&gt;&gt; Quaternion(1, 0, 1, 1) == Quaternion(scalar=1.0, vector=[0.1, 1.0, 1.0])
False
&gt;&gt;&gt; Quaternion() != Quaternion(scalar=2)
True
</code></pre>
<h2 id="negation">Negation</h2>
<blockquote>
<p><strong><code>__neg__()</code></strong></p>
</blockquote>
<p><code>-q</code> is the quaternion formed by the element wise negation of the elements of <code>q</code>.</p>
<p><strong>Returns:</strong> a new Quaternion object representing the negation of the single operand. 
If the operand is a unit quaternion, the result is guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; my_elements = my_quaternion.elements() # Numpy array of individual elements
&gt;&gt;&gt; -my_quaternion == Quaternion(-my_elements)
True
</code></pre>
<h2 id="addition">Addition</h2>
<blockquote>
<p><strong><code>__add__(other)</code></strong></p>
</blockquote>
<p><code>q1 + q2</code> is the quaternion formed by element-wise sum of <code>q1</code> and <code>q2</code>. <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/arithmetic/index.htm">Source</a></p>
<p><strong>Note:</strong> If 'other' is not a Quaternion object, it will be converted to one, using the behaviour described in the <a href="../initialisation">object initialisation</a> section. As described therein, a <code>TypeError</code> or <code>ValueError</code> will be raised if this conversion fails.</p>
<p><strong>Returns:</strong> a new Quaternion object representing the sum of the inputs.
The sum is <strong>not</strong> guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; q1 = Quaternion.random()
&gt;&gt;&gt; q2 = Quaternion.random()
&gt;&gt;&gt; q1 + q2 == Quaternion(q1.elements() + q2.elements())
True
</code></pre>
<h2 id="subtraction">Subtraction</h2>
<blockquote>
<p><strong><code>__sub__(other)</code></strong></p>
</blockquote>
<p><code>q1 - q2</code> is the quaternion formed by element-wise difference between <code>q1</code> and <code>q2</code>. <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/arithmetic/index.htm">Source</a> </p>
<p><strong>Note:</strong> If 'other' is not a Quaternion object, it will be converted to one, using the behaviour described in the <a href="../initialisation">object initialisation</a> section. As described therein, a <code>TypeError</code> or <code>ValueError</code> will be raised if this conversion fails.</p>
<p><strong>Returns:</strong> a new Quaternion object representing the difference of the inputs.
The difference is <strong>not</strong> guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; q1 = Quaternion.random()
&gt;&gt;&gt; q2 = Quaternion.random()
&gt;&gt;&gt; q1 - q2 == Quaternion(q1.elements() - q2.elements())
True
</code></pre>
<h2 id="multiplication">Multiplication</h2>
<blockquote>
<p><strong><code>__mul__(other)</code></strong></p>
</blockquote>
<p><code>q1 * q2</code> is the quaternion formed by Hamilton product of <code>q1</code> and <code>q2</code>. <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/arithmetic/index.htm">Source</a></p>
<p>The Hamiltonian product is not commutative. Ensure your operands are correctly placed. </p>
<p><strong>Note:</strong> If 'other' is not a Quaternion object, it will be converted to one, using the behaviour described in the <a href="../initialisation">object initialisation</a> section. As described therein, a <code>TypeError</code> or <code>ValueError</code> will be raised if this conversion fails. As a result this operation holds true for scalar multiplication as scalars are converted to pure real Quaternion objects.</p>
<p><strong>Returns:</strong> a new Quaternion object representing the Hamilton product of the inputs.
If the two multiplicands are unit quaternions, the product is guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; one = Quaternion(1, 0, 0, 0)
&gt;&gt;&gt; i   = Quaternion(0, 1, 0, 0)
&gt;&gt;&gt; j   = Quaternion(0, 0, 1, 0)
&gt;&gt;&gt; k   = Quaternion(0, 0, 0, 1)
&gt;&gt;&gt; (i * i) == (j * j) == (k * k) == (i * j * k) == -1
True
</code></pre>
<h2 id="division">Division</h2>
<blockquote>
<p><strong><code>__truediv__(other)</code> or <code>__div__(other)</code></strong></p>
</blockquote>
<p><code>q1 / q2</code> is the quaternion formed by Hamilton product of <code>q1</code> and <code>q2.inverse()</code>. <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/arithmetic/index.htm">Source</a></p>
<p>The Hamiltonian product is not commutative. Ensure your operands are correctly placed.</p>
<p><strong>Note:</strong> If 'other' is not a Quaternion object, it will be converted to one, using the behaviour described in the <a href="../initialisation">object initialisation</a> section. As described therein, a <code>TypeError</code> or <code>ValueError</code> will be raised if this conversion fails. As a result this operation holds true for scalar division as scalars are converted to pure real Quaternion objects.</p>
<p><strong>Returns:</strong> a new Quaternion object representing the Hamilton quotient of the inputs. 
If the dividend and divisor are unit quaternions, the quotient is guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; my_quaternion / my_quaternion == Quaternion(1.0)
True
</code></pre>
<h2 id="exponentiation">Exponentiation</h2>
<blockquote>
<p><strong><code>__pow__(other)</code></strong></p>
</blockquote>
<p><code>q ** p</code> is the quaternion formed by raising the Quaternion <code>q1</code> to the power of <code>p</code> for any real <code>p</code>. <a href="http://en.wikipedia.org/wiki/Quaternion#Exponential.2C_logarithm.2C_and_power">Source</a></p>
<p><strong>Returns:</strong> a new Quaternion object representing the the object raised to the power of the input.
If the base object is a unit quaternion, the result is guaranteed to be a unit quaternion.</p>
<pre><code>&gt;&gt;&gt; one = Quaternion(1, 0, 0, 0)
&gt;&gt;&gt; i   = Quaternion(0, 1, 0, 0)
&gt;&gt;&gt; j   = Quaternion(0, 0, 1, 0)
&gt;&gt;&gt; k   = Quaternion(0, 0, 0, 1)
&gt;&gt;&gt; (i ** 2) == (j ** 2) == (k ** 2) == -1
True
</code></pre>
<p><strong>Raises:</strong> <code>TypeError</code> if <code>other</code> cannot be interpreted as a real number.</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>